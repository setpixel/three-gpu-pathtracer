function e(e,r,t,n){Object.defineProperty(e,r,{get:t,set:n,enumerable:!0,configurable:!0})}var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},s=r.parcelRequire5b70;null==s&&((s=function(e){if(e in t)return t[e].exports;if(e in n){var r=n[e];delete n[e];var s={id:e,exports:{}};return t[e]=s,r.call(s.exports,s,s.exports),s.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,r){n[e]=r},r.parcelRequire5b70=s),s.register("27Lyk",(function(r,t){var n,s;e(r.exports,"register",(()=>n),(e=>n=e)),e(r.exports,"resolve",(()=>s),(e=>s=e));var o={};n=function(e){for(var r=Object.keys(e),t=0;t<r.length;t++)o[r[t]]=e[r[t]]},s=function(e){var r=o[e];if(null==r)throw new Error("Could not resolve bundle with id "+e);return r}})),s.register("cVdfP",(function(r,t){e(r.exports,"PathTracingSceneWorker",(()=>a));var n=s("hWj76"),o=s("8Zfx2"),i=s("a8VBx");class a extends n.PathTracingSceneGenerator{constructor(){super(),this.bvhGenerator=new i.GenerateMeshBVHWorker}generate(e,r={}){const{bvhGenerator:t}=this,{geometry:n,materials:s,textures:i}=this.prepScene(e),a={strategy:o.SAH,...r,maxLeafTris:1};return t.generate(n,a).then((r=>({scene:e,materials:s,textures:i,bvh:r})))}dispose(){this.bvhGenerator.dispose()}}})),s.register("hWj76",(function(r,t){e(r.exports,"PathTracingSceneGenerator",(()=>a));var n=s("ilwiq"),o=s("8Zfx2"),i=s("jM3IF");class a{prepScene(e){const r=[];return e.traverse((e=>{if(e.isSkinnedMesh||e.isMesh&&e.morphTargetInfluences){const t=new o.StaticGeometryGenerator(e);t.applyWorldTransforms=!1;const s=new n.Mesh(t.generate(),e.material);s.matrixWorld.copy(e.matrixWorld),s.matrix.copy(e.matrixWorld),s.matrix.decompose(s.position,s.quaternion,s.scale),r.push(s)}else e.isMesh&&r.push(e)})),i.mergeMeshes(r,{attributes:["position","normal","tangent","uv"]})}generate(e,r={}){const{materials:t,textures:n,geometry:s}=this.prepScene(e),i={strategy:o.SAH,...r,maxLeafTris:1};return{scene:e,materials:t,textures:n,bvh:new o.MeshBVH(s,i)}}}})),s.register("a8VBx",(function(r,t){e(r.exports,"GenerateMeshBVHWorker",(()=>i));var n=s("ilwiq"),o=s("6KVZ3");class i{constructor(){this.running=!1,this.worker=new Worker(s("2AdIp"))}generate(e,r={}){if(this.running)throw new Error("GenerateMeshBVHWorker: Already running job.");const{worker:t}=this;return this.running=!0,new Promise(((s,i)=>{t.onmessage=a=>{this.running=!1;const{data:u}=a;if(u.error)i(new Error(u.error)),t.onmessage=null;else if(u.serialized){const{serialized:i,position:a}=u,l=o.MeshBVH.deserialize(i,e,{setIndex:!1}),c=Object.assign({setBoundingBox:!0},r);if(e.attributes.position.array=a,e.index)e.index.array=i.index;else{const r=new n.BufferAttribute(i.index,1,!1);e.setIndex(r)}c.setBoundingBox&&(e.boundingBox=l.getBoundingBox(new n.Box3)),s(l),t.onmessage=null}else r.onProgress&&r.onProgress(u.progress)};const a=e.index?e.index.array:null,u=e.attributes.position.array;if(u.isInterleavedBufferAttribute||a&&a.isInterleavedBufferAttribute)throw new Error("GenerateMeshBVHWorker: InterleavedBufferAttribute are not supported for the geometry attributes.");const l=[u];a&&l.push(a),t.postMessage({index:a,position:u,options:{...r,onProgress:null,includedProgressCallback:Boolean(r.onProgress),groups:[...e.groups]}},l.map((e=>e.buffer)))}))}dispose(){this.worker.terminate()}terminate(){console.warn('GenerateMeshBVHWorker: "terminate" is deprecated. Use "dispose" instead.'),this.dispose()}}})),s.register("2AdIp",(function(e,r){var t=s("7ryUf");let n=new URL(s("27Lyk").resolve("jsyN8"),import.meta.url);e.exports=t(n.toString(),n.origin,!0)})),s.register("7ryUf",(function(e,r){e.exports=function(e,r,t){if(r===self.location.origin)return e;var n=t?"import "+JSON.stringify(e)+";":"importScripts("+JSON.stringify(e)+");";return URL.createObjectURL(new Blob([n],{type:"application/javascript"}))}})),s("27Lyk").register(JSON.parse('{"vZvyk":"aoRender.3426922d.js","jsyN8":"generateAsync.worker.b2811d07.js"}'));
//# sourceMappingURL=aoRender.3426922d.js.map
